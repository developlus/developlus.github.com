==================================
 サーバリニューアルのすゝめ（１）
==================================

VPS上で構築していたサーバのPythonを3.3系にアップデートしたところ，なに
を間違ってしまったのかいろいろなライブラリが利用できなくなってしまった．
スナップショットを取っておけばよかったものの・・・時すでに遅し．
ものはついでなので，メールサーバ＋メーリングリストのリニューアル＋Web
コンテンツの統合のためにサーバ自体をリニューアルする．きっと時間はかか
らないはず．

VPSサーバの増設
===============

「カゴヤ・クラウド／VPS」であれば，サーバを増設しても日単位の課金．新
規サーバを増設して，旧サーバからの移行が完了するまでの数日間分の利用料
金のみＯＫなはずです．

何かしらハマるはずなので，４〜５日といったところでしょうか・・・

今回は・・・Ubuntu 13系で行きたいところですが，LTSである12系しか準備さ
れていません．OpenVZの痛いところです．

::

   root@cat:~# cat /etc/issue
   Ubuntu 12.04.4 LTS \n \l


SSHサーバ
=========

確か通常のディストリビューションからUbuntu系をインストールすると，SSH
サーバはインストールされていなかったと思いますが，「カゴヤ・クラウド／
VPS」で作成されたインスタンスでは最初からSSHサーバが起動されています．

経験上，Webサーバを公開しているとブルートフォースアタックを受けるので，
sshdの待ち受けポートを変更しておきます．

::

   root@cat:~# vim /etc/ssh/sshd_config
   
   Port 22 ⇒ 10022
   ※わたしは10022は使っていませんが・・・

これで，22番ポートのListenを止めておけば無駄な攻撃を受けなくて済みます．

ついで，SSHクライアントで毎度ポートを設定するのも面倒なので，
[.ssh/config]に接続情報を記載しておくと便利です．

::

   user@host> vim ~/.ssh/config
   
   Host cat
     HostName cat.developlus.jp
     User user
     Port 10022

実際には，「ProxyCommand」とか，「GatewayPorts」とか「LocalForward」と
か沢山の設定を書いています．


.. author:: default
.. categories:: Blog
.. tags:: vps
.. comments::
